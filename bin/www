const app=require('../server');
const debug = require('debug')('server:server');
const https=require('https');
const port = normalizePort(process.env.PORT || '3001');
const { sequelize } = require("../src/models");
app.set('port', port);
const server=https.createServer(app);
server.listen(port,async ()=>{
    console.log(`Server is up on PORT ${port}`);
      try {
         await sequelize.authenticate();
         console.log("SQL database connected!");
    
       } catch (err) {
         console.log("SQL database connection failed");
         console.log(`ERROR: ${err.message}`);
      }
});

function normalizePort(val) {
    const port = parseInt(val, 10);

    if (isNaN(port)) {
        // named pipe
        return val;
    }

    if (port >= 0) {
        // port number
        return port;
    }

    return false;
}